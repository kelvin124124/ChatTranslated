<?xml version="1.0" encoding="utf-8"?>
<Project Sdk="Microsoft.NET.Sdk">
    <Import Project="Dalamud.Plugin.Bootstrap.targets" />

    <PropertyGroup>
        <Authors>kelvin124124</Authors>
        <Company></Company>
        <Version>2.1.2.0</Version>
        <Description>In-game chat translator.</Description>
        <Copyright></Copyright>
        <PackageProjectUrl>https://github.com/kelvin124124/ChatTranslated</PackageProjectUrl>
        <PackageLicenseExpression>AGPL-3.0-or-later</PackageLicenseExpression>
        <IsPackable>false</IsPackable>
    </PropertyGroup>

    <ItemGroup>
      <EmbeddedResource Remove="Localization\LocStr\Resources.resx" />
    </ItemGroup>

    <ItemGroup>
      <None Remove="Font\NotoSans-Medium.ttf" />
      <None Remove="Font\NotoSansJP-Medium.otf" />
      <None Remove="Font\NotoSansKR-Medium.otf" />
      <None Remove="Font\NotoSansSC-Medium.otf" />
      <None Remove="Font\NotoSansTC-Medium.otf" />
    </ItemGroup>

    <ItemGroup>
      <EmbeddedResource Include="Font\NotoSans-Medium.ttf">
        <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      </EmbeddedResource>
      <EmbeddedResource Include="Font\NotoSansJP-Medium.otf">
        <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      </EmbeddedResource>
      <EmbeddedResource Include="Font\NotoSansKR-Medium.otf">
        <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      </EmbeddedResource>
      <EmbeddedResource Include="Font\NotoSansSC-Medium.otf">
        <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      </EmbeddedResource>
      <EmbeddedResource Include="Font\NotoSansTC-Medium.otf">
        <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      </EmbeddedResource>
    </ItemGroup>

    <ItemGroup>
      <None Include="Localization\LocStr\Resources.resx" />
    </ItemGroup>

    <ItemGroup>
        <PackageReference Include="GTranslate" Version="2.2.0" />
    </ItemGroup>

    <Target Name="Secrets" BeforeTargets="PrepareForBuild" Condition="'$(PLOGON_SECRET_cfv2)' != ''">
        <PropertyGroup>
            <SecretPath>$(ProjectDir)Resources\cfv2.secret</SecretPath>
        </PropertyGroup>
        <WriteLinesToFile File="$(SecretPath)" Lines="$(PLOGON_SECRET_cfv2)" Overwrite="true" />
    </Target>

    <Target Name="EmbedSecrets" BeforeTargets="PrepareForBuild" AfterTargets="Secrets">
        <ItemGroup>
            <EmbeddedResource Include="$(SecretPath)" LogicalName="ChatTranslated.Resources.cfv2.secret" />
        </ItemGroup>
    </Target>
</Project>
